Part 0 – Intro and setup


(A) - INTRO

Welcome to the RapidApp "Chinook" demo.

In this demo video we're going to build a new webapp from scratch, step by step, using RapidApp, with the "Chinook" sample database for the backend

We're going to build a Database-driven application, using the "RapidDbic" plugin, which is a component of RapidApp that provides out-of-the box front-ends for DBIx colon-colon Class, or "DBIC" for short. 

RapidDbic essentially auto-configures other RapidApp modules, which as we'll see, sets up grid and page views for DBIC Sources, proving CRUD, interactive query builders, customizable views, and so on…

For this demo, as I mentioned, we're going to use the Chinook sample database. Chinook is a freely available sample data model, with some nice sample data. It provides multiple tables with various types columns, indexes, relationships, foreign-key constraints, and so on. The purpose of Chinook is exactly for the type of demo we're doing in this video, showcasing the common use-cases for relational databases…


All steps will be performed live/real-world within this shell, which is an SSH session on an ordinary Linux box.

We will test as we go, and demonstrate the features and functionality in Firefox.

But all commands and changes will be done in this command shell and recorded with Git, and since you are already in the future, it is available on Github at the url shown…

I'm also recording the full command history - which is what is on the screen now, and is both the live commands being run, as well as serving the function of slides for this video


This video does assume the viewer has some prior knowledge. To get the most out of this video you should already know about

Perl and CPAN.

Catalyst, since RapidApp is an extension to Catalyst, which is what we'll be working in.

DBIC, and relational database concepts in general

Git, just so you can follow along in the repo and download the code we'll be building

And finally, Linux and bash just since that is the environment we're working in, within the command shell.

If you're not up to speed on all these topics, don't worry, you can still follow along and learn as you go, and there are plenty of resources available online. This video is designed to make following along as easy as possible, with every command and change recorded….



(B) - APP/GIT SETUP

So, first things first, we need to download and install the latest RapidApp from CPAN. 

As you can see, I already have RapidApp on my system, but if I didn't, it would have been automatically installed, along with all its dependencies, including Catalyst.

If you don't have cpanm, you need to install cpanminus. Cpanminus is a handy tool for installing CPAN packages with dependencies without all the fuss and setup required for the traditional cpan client.


Next, we need to create the new Catalyst application using the helper script provided by Catalyst. The app could be named anything, but I'm going to call it RA::ChinookDemo.

The catalyst.pl helper script has now created a skeleton of base files and directories which will be working in moving forward.

The first thing we're going to do is setup the git repository to track our changes.

I'm also going to setup a simple bash alias to automate committing changes going forward.

So when we type Commit with a capital C, it will automatically:
* Write outstanding commands to the history file
* And copy it to cmd_history.sh
* Add all changes to the git index
* And commit those changes with the supplied commit message

Now, we'll use this new command to record our first commit.

again, this is the repository that is available on github. I'll push it at the end of the video. 



Now we need to download the actual Chinook database

Chinook is available in multiple database formats, and DBIC supports multiple formats, but we'll be using SQLite for this demo.

I would have done this with wget in the shell, but unfortunately their site doesn't support direct download links. So, instead I've just already downloaded and extracted this zip file into the parent directory of our app.

We're going to use the basic sql file which includes both the DDL, or schema, and the sample data.

As you can see, this file is about 1.8 megs.

Now, I'm going to use it to create a new SQLite database, chinook.db in the current directory. This process takes a little while, about 10 minutes. Just for fun, let's run the command through time to see how long it actually takes

Note that this is error is safe to ignore; it's just caused by the Unicode BOM, or byte order mark, that the Chinook people have put at the start of the sql file. I could have removed it, but it doesn't hurt anything.

Now let's fast-forward to the future. 

The command finished and ended up taking just over 8 minutes. 

Let's go ahead and commit our progress



Now we're going to create a Catalyst DBIC Schema Model for our new database using the helper script. Under the hood this uses DBIC's Schema::Loader to automatically generate schema and result classes based on the database we just created.

* We're creating a new model called 'DB', which is just the name I picked, it could be anything
* based on DBIC::Schema, which tells Catalyst which helper to use
* using this for the DBIC schema namespace
* And now we'll set some Schema::Loader options, creating the result classes one time, statically, and also turning off POD generation in the created files
* Now comes the DSN string, which we're pointing at our SQLite database file
* And finally, we'll set some connect_info options, such as enabling Unicode
*  and setting quote_names, which is required for RapidApp

For more info on this command and the available options, see the DBIC::Schema helper docs on CPAN

Now we'll commit the changes, which shows the files that were just created. 

These include the DBIC Schema and 11 result classes for each of the tables in the Chinook database, and the Catalyst Model, which links to them


Part 1 - RapidDbic


RECAP

To recap what's been done so far:

* We've created a standard skeleton Catalyst app,
*  setup SQLite with the Chinook sample database
*  and created an associated DBIC Schema and model
* We've been tracking our changes with git,
*  and the repo is on Github,
*  and we've also been using a custom shell alias, Commit with a capital C, to record notes and command history as we go, which is in the file cmd_history.sh

As you can see we've made 3 commits so far. I'm making another now, with a tag, so it is easy to jump back to this spot.

Up until now this has been out-of-the-box Catalyst. Now we're going to enable RapidApp and load the RapidDbic plugin for web access to our SQLite database. This is done in the main application class, ChinookDemo.pm

This is the boiler-plate application class content. I'm removing these comments to make the file more concise. 

To enable RapidApp, simply use it.

RapidApp doesn't do anything by itself, but makes other modules and plugins available. For this demo we're going to be using RapidDbic, so we just need to load it, like any Cayalyst plugin.

I'm removing these other plugins just because we're not going to be using them. However, it wouldn't break anything if I left them. And we'll go ahead and leave -Debug on for now.

Now we need to configure RapidDbic, which is done in the standard manner in the Catalyst config. 

There are many available options, but the only one that is required is the list of DBIC::Schema models to use. 

And we'll specify the model we already setup with the Chinook sample database, which we named 'DB'.

That's all that's needed for the base setup, so we'll save and exit.

We need to do one last thing before we can start using the app, which is to remove the auto-created Root controller that displays the catalyst welcome screen. We need to do this because locally defined controllers always get precedence. The default Root controller is just a placeholder, anyway.

Now let's start the app using the test server:

Since we left -Debug mode on, various console messages are shown. The cyan lines show RapidApp modules being loaded. RapidDbic is actually just a config wrapper; under the hood it sets up and configures the real RapidApp modules that do the heavy lifting.

Now that the app has started, let's fire up a browser and have a look


* 
